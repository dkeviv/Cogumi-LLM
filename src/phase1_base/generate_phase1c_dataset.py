#!/usr/bin/env python3
"""
Phase 1C: Generate 40K Targeted Training Examples
Generated by: GitHub Copilot (Claude Sonnet 4.5)
Purpose: Create high-quality examples targeting failure patterns from Phase 1B

Categories:
- Code: 25K examples (targeting programming, debugging, code completion)
- Math: 10K examples (targeting calculations, word problems, proofs)
- Reasoning: 3K examples (targeting logic, inference, comprehension)
- Other: 2K examples (targeting grammar, translation, general QA)

Output: data/phase1c/generated_examples.jsonl
Format: {"instruction": "...", "output": "...", "category": "...", "meta": {...}}
"""

import json
import os
from pathlib import Path
from typing import List, Dict

def create_output_dir():
    """Create output directory for Phase 1C data."""
    output_dir = Path("data/phase1c")
    output_dir.mkdir(parents=True, exist_ok=True)
    return output_dir

def save_examples(examples: List[Dict], output_file: str):
    """Save examples to JSONL file."""
    with open(output_file, 'w', encoding='utf-8') as f:
        for example in examples:
            f.write(json.dumps(example, ensure_ascii=False) + '\n')
    print(f"âœ… Saved {len(examples)} examples to {output_file}")

def generate_code_examples() -> List[Dict]:
    """Generate 25K code examples targeting common failure patterns."""
    examples = []
    
    # Batch 1: Python programming (5K examples)
    # Will be populated by Copilot in batches
    
    print(f"ğŸ“ Generated {len(examples)} code examples")
    return examples

def generate_math_examples() -> List[Dict]:
    """Generate 10K math examples targeting common failure patterns."""
    examples = []
    
    # Batch 1: Word problems (3K examples)
    # Will be populated by Copilot in batches
    
    print(f"ğŸ“ Generated {len(examples)} math examples")
    return examples

def generate_reasoning_examples() -> List[Dict]:
    """Generate 3K reasoning examples targeting common failure patterns."""
    examples = []
    
    # Batch 1: Logical inference (1K examples)
    # Will be populated by Copilot in batches
    
    print(f"ğŸ“ Generated {len(examples)} reasoning examples")
    return examples

def generate_other_examples() -> List[Dict]:
    """Generate 2K other examples (grammar, translation, QA)."""
    examples = []
    
    # Batch 1: Grammar and language (1K examples)
    # Will be populated by Copilot in batches
    
    print(f"ğŸ“ Generated {len(examples)} other examples")
    return examples

def main():
    """Generate all 40K examples and save to JSONL."""
    print("ğŸš€ Starting Phase 1C Dataset Generation...")
    print("=" * 60)
    
    output_dir = create_output_dir()
    
    # Generate by category
    print("\nğŸ“Š Generating examples by category...")
    code_examples = generate_code_examples()
    math_examples = generate_math_examples()
    reasoning_examples = generate_reasoning_examples()
    other_examples = generate_other_examples()
    
    # Combine all examples
    all_examples = code_examples + math_examples + reasoning_examples + other_examples
    
    # Save to file
    output_file = output_dir / "generated_examples.jsonl"
    save_examples(all_examples, str(output_file))
    
    # Summary
    print("\n" + "=" * 60)
    print(f"âœ… Total examples generated: {len(all_examples)}")
    print(f"   - Code: {len(code_examples)}")
    print(f"   - Math: {len(math_examples)}")
    print(f"   - Reasoning: {len(reasoning_examples)}")
    print(f"   - Other: {len(other_examples)}")
    print(f"\nğŸ’¾ Output: {output_file}")
    print("=" * 60)

if __name__ == "__main__":
    main()
